<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Methods - Internal · EnergyModelsHydrogen</title><meta name="title" content="Methods - Internal · EnergyModelsHydrogen"/><meta property="og:title" content="Methods - Internal · EnergyModelsHydrogen"/><meta property="twitter:title" content="Methods - Internal · EnergyModelsHydrogen"/><meta name="description" content="Documentation for EnergyModelsHydrogen."/><meta property="og:description" content="Documentation for EnergyModelsHydrogen."/><meta property="twitter:description" content="Documentation for EnergyModelsHydrogen."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">EnergyModelsHydrogen</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../../manual/quick-start/">Quick Start</a></li><li><a class="tocitem" href="../../../manual/simple-example/">Examples</a></li><li><a class="tocitem" href="../../../manual/NEWS/">Release notes</a></li></ul></li><li><span class="tocitem">Nodes</span><ul><li><a class="tocitem" href="../../../nodes/electrolyzer/">Electrolyzer</a></li><li><a class="tocitem" href="../../../nodes/reformer/">Reformer</a></li><li><a class="tocitem" href="../../../nodes/h2_storage/">H₂ storage</a></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../../../how-to/contribute/">Contribute to EnergyModelsHydrogen</a></li></ul></li><li><span class="tocitem">Auxiliary functions</span><ul><li><a class="tocitem" href="../../../aux-fun/lin-reform/">Linear reformulation</a></li><li><a class="tocitem" href="../../../aux-fun/pressure_calc/">Compression energy</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../public/">Public</a></li><li><input class="collapse-toggle" id="menuitem-6-2" type="checkbox" checked/><label class="tocitem" for="menuitem-6-2"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../types-EMH/">Types</a></li><li><a class="tocitem" href="../methods-fields/">Methods - Accessing fields</a></li><li class="is-active"><a class="tocitem" href>Methods - Internal</a><ul class="internal"><li><a class="tocitem" href="#lib-int-met-idx"><span>Index</span></a></li><li><a class="tocitem" href="#lib-int-met-con"><span>Constraint methods</span></a></li><li><a class="tocitem" href="#lib-int-met-check"><span>Check methods</span></a></li><li><a class="tocitem" href="#lib-int-met-util"><span>Utility methods</span></a></li></ul></li><li><a class="tocitem" href="../methods-EMB/">Methods - <code>EnergyModelsBase</code></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li><a class="is-disabled">Internals</a></li><li class="is-active"><a href>Methods - Internal</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Methods - Internal</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/main/docs/src/library/internals/methods-EMH.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="lib-int-met"><a class="docs-heading-anchor" href="#lib-int-met">Methods - Internal</a><a id="lib-int-met-1"></a><a class="docs-heading-anchor-permalink" href="#lib-int-met" title="Permalink"></a></h1><h2 id="lib-int-met-idx"><a class="docs-heading-anchor" href="#lib-int-met-idx">Index</a><a id="lib-int-met-idx-1"></a><a class="docs-heading-anchor-permalink" href="#lib-int-met-idx" title="Permalink"></a></h2><ul><li><a href="#EnergyModelsHydrogen.capacity_max"><code>EnergyModelsHydrogen.capacity_max</code></a></li><li><a href="#EnergyModelsHydrogen.check_commitment_profile"><code>EnergyModelsHydrogen.check_commitment_profile</code></a></li><li><a href="#EnergyModelsHydrogen.check_load_lim"><code>EnergyModelsHydrogen.check_load_lim</code></a></li><li><a href="#EnergyModelsHydrogen.compression_energy"><code>EnergyModelsHydrogen.compression_energy</code></a></li><li><a href="#EnergyModelsHydrogen.constraints_previous_usage"><code>EnergyModelsHydrogen.constraints_previous_usage</code></a></li><li><a href="#EnergyModelsHydrogen.constraints_rate_of_change"><code>EnergyModelsHydrogen.constraints_rate_of_change</code></a></li><li><a href="#EnergyModelsHydrogen.constraints_rate_of_change_iterate"><code>EnergyModelsHydrogen.constraints_rate_of_change_iterate</code></a></li><li><a href="#EnergyModelsHydrogen.constraints_state_seq"><code>EnergyModelsHydrogen.constraints_state_seq</code></a></li><li><a href="#EnergyModelsHydrogen.constraints_state_seq_iter"><code>EnergyModelsHydrogen.constraints_state_seq_iter</code></a></li><li><a href="#EnergyModelsHydrogen.constraints_state_time_iter"><code>EnergyModelsHydrogen.constraints_state_time_iter</code></a></li><li><a href="#EnergyModelsHydrogen.constraints_usage"><code>EnergyModelsHydrogen.constraints_usage</code></a></li><li><a href="#EnergyModelsHydrogen.constraints_usage_iterate"><code>EnergyModelsHydrogen.constraints_usage_iterate</code></a></li><li><a href="#EnergyModelsHydrogen.constraints_usage_sp"><code>EnergyModelsHydrogen.constraints_usage_sp</code></a></li><li><a href="#EnergyModelsHydrogen.energy_curve"><code>EnergyModelsHydrogen.energy_curve</code></a></li><li><a href="#EnergyModelsHydrogen.fix_elect_on_b"><code>EnergyModelsHydrogen.fix_elect_on_b</code></a></li><li><a href="#EnergyModelsHydrogen.linear_reformulation"><code>EnergyModelsHydrogen.linear_reformulation</code></a></li><li><a href="#EnergyModelsHydrogen.multiplication_variables"><code>EnergyModelsHydrogen.multiplication_variables</code></a></li><li><a href="#EnergyModelsHydrogen.ramp_disjunct"><code>EnergyModelsHydrogen.ramp_disjunct</code></a></li></ul><h2 id="lib-int-met-con"><a class="docs-heading-anchor" href="#lib-int-met-con">Constraint methods</a><a id="lib-int-met-con-1"></a><a class="docs-heading-anchor-permalink" href="#lib-int-met-con" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.constraints_usage" href="#EnergyModelsHydrogen.constraints_usage"><code>EnergyModelsHydrogen.constraints_usage</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">constraints_usage(m, n::AbstractElectrolyzer, 𝒯ᴵⁿᵛ, modeltype::EnergyModel)</code></pre><p>Function for creating the usage constraints for an AbstractElectrolyzer. These constraints calculate the usage of the electrolyzer up to each time step for both the lifetime and the degradation calculations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/electrolyzer.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.constraints_usage_sp" href="#EnergyModelsHydrogen.constraints_usage_sp"><code>EnergyModelsHydrogen.constraints_usage_sp</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">constraints_usage_sp(
    m,
    n::AbstractElectrolyzer,
    prev_pers::PreviousPeriods,
    t_inv::TS.AbstractStrategicPeriod,
    modeltype::EnergyModel,
)</code></pre><p>Function for creating the constraints on the previous usage of an <a href="../types-EMH/#EnergyModelsHydrogen.AbstractElectrolyzer"><code>AbstractElectrolyzer</code></a> before the beginning of a strategic period.</p><p>In the case of the first strategic period, it fixes the variable <code>elect_prev_use_sp</code> to 0. In all subsequent strategic periods, the previous usage is calculated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/electrolyzer.jl#L30-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.constraints_usage_iterate" href="#EnergyModelsHydrogen.constraints_usage_iterate"><code>EnergyModelsHydrogen.constraints_usage_iterate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">constraints_usage_iterate(
    m,
    n::AbstractElectrolyzer,
    prev_pers::PreviousPeriods,
    elec_pers::ElecPeriods,
    per,
    ts::RepresentativePeriods,
    modeltype::EnergyModel,
)</code></pre><p>Iterate through the individual time structures of a <code>AbstractElectrolyzer</code> node.</p><p>In the case of <code>RepresentativePeriods</code>, additional constraints are calculated for the usage of the electrolyzer in representative periods through introducing the variable <code>elect_use_rp[𝒩ᴱᴸ, 𝒯ʳᵖ]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/electrolyzer.jl#L85-L101">source</a></section><section><div><p>In the case of <code>OperationalScenarios</code>, we purely iterate through the individual time structures.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/electrolyzer.jl#L129-L132">source</a></section><section><div><p>In the case of <code>SimpleTimes</code>, the iterator function is at its lowest level. In this situation,the previous level is calculated using the function <a href="#EnergyModelsHydrogen.constraints_previous_usage"><code>constraints_previous_usage</code></a>. The approach for calculating the constraints is depending on the types in the parameteric type <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/misc/#EnergyModelsBase.PreviousPeriods"><code>PreviousPeriods</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/electrolyzer.jl#L152-L158">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.constraints_previous_usage" href="#EnergyModelsHydrogen.constraints_previous_usage"><code>EnergyModelsHydrogen.constraints_previous_usage</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">constraints_previous_usage(
    m,
    n::AbstractElectrolyzer,
    prev_pers::PreviousPeriods,
    elec_pers::ElecPeriods,
    t::OperationalPeriod,
    modeltype::EnergyModel,
)</code></pre><p>Returns the previous usage of an <code>AbstractElectrolyzer</code> node depending on the type of <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/misc/#EnergyModelsBase.PreviousPeriods"><code>PreviousPeriods</code></a>.</p><p>The basic functionality is used in the case when the previous operational period is a <code>TimePeriod</code>, in which case it just returns the previous operational period.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/electrolyzer.jl#L197-L212">source</a></section><section><div><p>When the previous operational, representative, and strategic periods are <code>Nothing</code>, the</p><p><strong>variable <code>elect_prev_use</code> is fixed to a value of 0.</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/electrolyzer.jl#L228-L231">source</a></section><section><div><p>When the previous operational and representative periods are <code>Nothing</code> while the previous strategic period is given, then previous usage is given through the sum of the usage in all previous strategic periods after the stack replacement through the variable <code>prev_usage</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/electrolyzer.jl#L242-L247">source</a></section><section><div><p>When the previous operational period is <code>Nothing</code> and the previous representative period an <code>AbstractRepresentativePeriod</code> then the time structure <em>does</em> include <code>RepresentativePeriods</code>.</p><p>The constraint then sums up the values from the previous representative period.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/electrolyzer.jl#L260-L265">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.constraints_rate_of_change_iterate" href="#EnergyModelsHydrogen.constraints_rate_of_change_iterate"><code>EnergyModelsHydrogen.constraints_rate_of_change_iterate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">constraints_rate_of_change_iterate(
    m,
    n::Reformer,
    per,
    t_last,
    ts,
    modeltype::EnergyModel,
)</code></pre><p>Function for iterating through the time structure for calculating the correct rate of change constraints of the Reformer <code>n</code>.</p><p>When the time structure includes <code>RepresentativePeriods</code>, period <code>t_last</code> is updated with last operational period within each representative period.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/reformer.jl#L1-L16">source</a></section><section><div><p>When the time structure includes <code>OperationalScenarios</code>, period <code>t_last</code> is updated with last operational period within each operational scenario.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/reformer.jl#L31-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.constraints_rate_of_change" href="#EnergyModelsHydrogen.constraints_rate_of_change"><code>EnergyModelsHydrogen.constraints_rate_of_change</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">constraints_rate_of_change(
    m,
    n::Reformer,
    ramp_lim::UnionRampUp,
    ref_pers::RefPeriods,
    prod_on,
    modeltype::EnergyModel,
)</code></pre><p>Function for creating the constraints on the maximum postivite rate of change. This constraint is only active if the <code>Reformer</code> is online in both the current and the previous operational periods, that is:</p><pre><code class="nohighlight hljs">m[:ref_on_b][n, t_prev] = m[:ref_on_b][n, t] = 1</code></pre><p>The function <a href="../methods-fields/#EnergyModelsHydrogen.prev_op"><code>prev_op</code></a> is used to incorporate the cyclic constraints while the function <a href="#EnergyModelsHydrogen.ramp_disjunct"><code>ramp_disjunct</code></a> is used to extract the disjuntion contribution to the constraint depending on the modeltype.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/reformer.jl#L65-L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.constraints_state_seq_iter" href="#EnergyModelsHydrogen.constraints_state_seq_iter"><code>EnergyModelsHydrogen.constraints_state_seq_iter</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">constraints_state_seq_iter(
    m,
    n::Reformer,
    per,
    t_last,
    ts,
    modeltype::EnergyModel
)</code></pre><p>Function for iterating through the time structure for calculating the correct cyclic constraints for the sequencing of the states of the Reformer <code>n</code>.</p><p>The function automatically deduces the provided time structure and calls the calls the corresponding functions iteratively. It eventually calls the function <a href="#EnergyModelsHydrogen.constraints_state_seq"><code>constraints_state_seq</code></a> for imposing the sequencing constraints on the different states.</p><p>When the time structure includes <code>RepresentativePeriods</code>, period <code>t_last</code> is updated with last operational period within each representative period.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/reformer.jl#L110-L130">source</a></section><section><div><p>When the time structure includes <code>OperationalScenarios</code>, period <code>t_last</code> is updated with last operational period within each operational scenario.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/reformer.jl#L145-L148">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.constraints_state_seq" href="#EnergyModelsHydrogen.constraints_state_seq"><code>EnergyModelsHydrogen.constraints_state_seq</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">constraints_state_seq(
    m,
    n::Reformer,
    ref_pers::RefPeriods,
    state_a::Symbol,
    state_b::Symbol,
    modeltype::EnergyModel,
)</code></pre><p>Function for creating the constraints on the sequencing of the individual states when <code>state_b</code> has to occur after <code>state_a</code>. Both <code>state_a</code> and <code>state_b</code> refer in this case to binary variables included in the JuMP model.</p><p>The function <a href="../methods-fields/#EnergyModelsHydrogen.prev_op"><code>prev_op</code></a> is used to incorporate the cyclic constraints.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/reformer.jl#L182-L197">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.constraints_state_time_iter" href="#EnergyModelsHydrogen.constraints_state_time_iter"><code>EnergyModelsHydrogen.constraints_state_time_iter</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">constraints_state_time_iter(
    m,
    n::Reformer,
    per,
    t_last,
    ts,
    modeltype::EnergyModel
)</code></pre><p>Function for iterating through the time structure for calculating the correct requirement for the length of the individual states.</p><p>When the time structure includes <code>RepresentativePeriods</code>, period <code>t_last</code> is updated with last operational period within each representative period.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/reformer.jl#L211-L226">source</a></section><section><div><p>When the time structure includes <code>OperationalScenarios</code>, period <code>t_last</code> is updated with last operational period within each operational scenario.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/constraints/reformer.jl#L241-L244">source</a></section></article><h2 id="lib-int-met-check"><a class="docs-heading-anchor" href="#lib-int-met-check">Check methods</a><a id="lib-int-met-check-1"></a><a class="docs-heading-anchor-permalink" href="#lib-int-met-check" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.check_load_lim" href="#EnergyModelsHydrogen.check_load_lim"><code>EnergyModelsHydrogen.check_load_lim</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">check_load_lim(n, 𝒯)</code></pre><p>Checks the limits for the capacity load.</p><p><strong>Checks</strong></p><ul><li>The field <code>min_load</code> is required to be non-negative.</li><li>The field <code>max_load</code> is required to be larger than the field <code>min_load</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/checks.jl#L305-L313">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.check_commitment_profile" href="#EnergyModelsHydrogen.check_commitment_profile"><code>EnergyModelsHydrogen.check_commitment_profile</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">check_commitment_profile(
    time_profile::TimeProfile,
    𝒯::TwoLevel,
    field_name::String,
    check_timeprofiles::Bool
)</code></pre><p>Checks that the unit commitment <code>time_profile</code> for the field <code>field_name</code> follows the given <code>TimeStructure</code> <code>𝒯</code>.</p><p><strong>Checks</strong></p><ul><li>The <code>time_profile</code> cannot have a finer granulation than <code>RepresentativeProfile</code> through calling the function <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/internals/functions/#EnergyModelsBase.check_representative_profile"><code>EnergyModelsBase.check_representative_profile</code></a>.</li><li>The <code>time_profile</code> must be non-negative.</li></ul><p><strong>Conditional checks (if <code>check_timeprofiles=true</code>)</strong></p><ul><li>The <code>time_profile</code>s have to have the same length as the number of strategic or representative periods.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/checks.jl#L256-L275">source</a></section></article><h2 id="lib-int-met-util"><a class="docs-heading-anchor" href="#lib-int-met-util">Utility methods</a><a id="lib-int-met-util-1"></a><a class="docs-heading-anchor-permalink" href="#lib-int-met-util" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.capacity_max" href="#EnergyModelsHydrogen.capacity_max"><code>EnergyModelsHydrogen.capacity_max</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">capacity_max(n::AbstractElectrolyzer, t_inv, modeltype::EnergyModel)</code></pre><p>Function for calculating the maximum capacity.</p><pre><code class="nohighlight hljs">modeltype::EnergyModel</code></pre><p>When the modeltype is an <code>EnergyModel</code>, it returns the capacity of the <code>AbstractElectrolyzer</code>.</p><pre><code class="nohighlight hljs">modeltype::AbstractInvestmentModel</code></pre><p>When the modeltype is an <code>AbstractInvestmentModel</code>, it returns the maximum installed capacity.</p><div class="admonition is-info" id="Note-43fa0052ff978285"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-43fa0052ff978285" title="Permalink"></a></header><div class="admonition-body"><p>If the <a href="../types-EMH/#EnergyModelsHydrogen.AbstractElectrolyzer"><code>AbstractElectrolyzer</code></a> node does not have investments, it reuses the default function.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/utils.jl#L213-L230">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.linear_reformulation" href="#EnergyModelsHydrogen.linear_reformulation"><code>EnergyModelsHydrogen.linear_reformulation</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">linear_reformulation(
    m,
    𝒯,
    var_binary,
    var_continuous,
    lb::TimeProfile,
    ub::TimeProfile,
)</code></pre><p>Linear reformulation of the element-wise multiplication of the binary variable <code>var_binary[𝒯]</code> and the continuous variable <code>var_continuous[𝒯] ∈ [ub, lb]</code>.</p><p>It returns the product <code>var_aux[𝒯]</code> with</p><p><span>$var\_aux[t] = var\_binary[t] \times var\_continuous[t]$</span>.</p><div class="admonition is-info" id="Note-a3a138dc13ca3977"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-a3a138dc13ca3977" title="Permalink"></a></header><div class="admonition-body"><p>The bounds <code>lb</code> and <code>ub</code> must have the ability to access their fields using the iterator of <code>𝒯</code>, that is if <code>𝒯</code> corresponds to the strategic periods, it is not possible to provide an <code>OperationalProfile</code> or <code>RepresentativeProfile</code>.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/utils.jl#L1-L22">source</a></section><section><div><pre><code class="language-julia hljs">linear_reformulation(
    m,
    𝒯ᵃ::T,
    𝒯ᵇ::T,
    var_binary,
    var_continuous,
    lb::TimeProfile,
    ub::TimeProfile,
) where {T}</code></pre><p>Linear reformulation of the multiplication of the binary variable <code>var_binary[𝒯ᵃ, 𝒯ᵇ]</code> and the continuous variable <code>var_continuous[𝒯ᵇ] ∈ [ub, lb]</code>.</p><p>It returns the product <code>var_aux[𝒯ᵃ, 𝒯ᵇ]</code> with</p><p><span>$var\_aux[t_a, t_b] = var\_binary[t_a, t_b] \times var\_continuous[t_b]$</span>.</p><div class="admonition is-info" id="Note-493e6038a22382a6"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-493e6038a22382a6" title="Permalink"></a></header><div class="admonition-body"><p>𝒯ᵃ and 𝒯ᵇ must be of the same type, that is either, <em>e.g.</em> a <code>TwoLevel</code>, <code>AbstractStratPers</code>, <code>StratReprPeriods</code>, or comparable. This is enforced through the parametric type <code>T</code>.</p><p>The bounds <code>lb</code> and <code>ub</code> must have the ability to access their fields using the iterator of <code>𝒯ᵃ</code>, that is if <code>𝒯ᵃ</code> corresponds to the strategic periods, it is not possible to provide an <code>OperationalProfile</code> or <code>RepresentativeProfile</code>.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/utils.jl#L48-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.multiplication_variables" href="#EnergyModelsHydrogen.multiplication_variables"><code>EnergyModelsHydrogen.multiplication_variables</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">multiplication_variables(
    m,
    n::AbstractHydrogenNetworkNode,
    𝒯,
    var_b,
    modeltype::EnergyModel
)</code></pre><p>Function for calculating the muliplication of the capacity of an <code>AbstractHydrogenNetworkNode</code> and a binary variable.</p><pre><code class="nohighlight hljs">modeltype::EnergyModel</code></pre><p>Multiplication of the installed capacity (expressed through <code>capacity(n, t)</code>) and a binary variable <code>var_b</code> in a period <code>t</code> (<em>e.g.</em>, <code>elect_on_b[n, t]</code>).</p><div class="admonition is-info" id="Note-93e48059455f1b81"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-93e48059455f1b81" title="Permalink"></a></header><div class="admonition-body"><p>The time structure <code>𝒯</code> can be either a <code>TwoLevel</code> or <code>StrategicPeriods</code>. It is however necessary, that the variable <code>var_b</code> is indexed over the iterators of <code>𝒯</code>.</p></div></div><p><strong>Returns</strong></p><ul><li><strong><code>prod[t]</code></strong>: Multiplication of <code>capacity(n, t)</code> and <code>var_b[n, t]</code>.</li></ul><pre><code class="nohighlight hljs">modeltype::AbstractInvestmentModel</code></pre><p>When the modeltype is an <code>AbstractInvestmentModel</code>, then the function applies a linear reformulation of the binary-continuous multiplication based on the McCormick relaxation and the function <a href="#EnergyModelsHydrogen.linear_reformulation"><code>linear_reformulation</code></a>.</p><div class="admonition is-info" id="Note-551d92d5217f514f"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-551d92d5217f514f" title="Permalink"></a></header><div class="admonition-body"><p>If the <code>AbstractHydrogenNetworkNode</code> node does not have investments, it reuses the default function to avoid increasing the number of variables in the model.</p></div></div><p><strong>Returns</strong></p><ul><li><strong><code>prod[t]</code></strong>: Multiplication of <code>cap_inst[n, t]</code> and <code>var_b[t]</code> or alternatively <code>cap_current[n, t]</code> and <code>var_b[t]</code>, if the TimeStructure is a <code>StrategicPeriods</code> and the node <code>n</code> has investments.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/utils.jl#L109-L148">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.fix_elect_on_b" href="#EnergyModelsHydrogen.fix_elect_on_b"><code>EnergyModelsHydrogen.fix_elect_on_b</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fix_elect_on_b(m, n::AbstractElectrolyzer, 𝒯, 𝒫, modeltype::EnergyModel)</code></pre><p>Fixes the variable <code>:elect_on_b</code>  in operational periods without capacity and the variable <code>:elect_stack_replace_b</code> in strategic periods without capacity to 0 to simplify the optimziation problem.</p><p>Provides start values to the variables in all other periods as well as start values for the variable <code>:elect_usage_mult_sp_b</code></p><pre><code class="nohighlight hljs">modeltype::EnergyModel</code></pre><p>The function utilizes the the value of the field <code>cap</code> of the node.</p><pre><code class="nohighlight hljs">modeltype::AbstractInvestmentModel</code></pre><p>When the node has investment data, the function utilizes the the value of the field <code>EMI.max_add</code> of the <code>AbstractInvData</code>. Otherwise, it uses as well the field <code>cap</code> of the node.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/utils.jl#L162-L182">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.ramp_disjunct" href="#EnergyModelsHydrogen.ramp_disjunct"><code>EnergyModelsHydrogen.ramp_disjunct</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ramp_disjunct(m, n::Reformer, ref_pers::RefPeriods, modeltype::EnergyModel)</code></pre><p>Function for calculating the disjunction contribution for the ramping constraints of a reformer.</p><pre><code class="nohighlight hljs">modeltype::EnergyModel</code></pre><p>The function utilizes the the value of the field <code>cap</code> of the node for achieving tight bounds for the disjunction.</p><pre><code class="nohighlight hljs">modeltype::AbstractInvestmentModel</code></pre><p>When the node has investment data, the function utilizes the the value of the field <code>EMI.max_installed</code> of the <code>AbstractInvData</code> for achieving tight bounds for the disjunction. Otherwise, it uses as well the field <code>cap</code> of the node.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/utils.jl#L235-L251">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.compression_energy" href="#EnergyModelsHydrogen.compression_energy"><code>EnergyModelsHydrogen.compression_energy</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compression_energy(p₁, p₂; T₁=298.15, κ=1.41, η=0.75)</code></pre><p>Returns the required compression energy for a compression from pressure <code>p₁</code> to <code>p₂</code>. The compression energy is in principle based on isentropic compression. The unit of the compression energy is J/mol.</p><p><strong>Arguments</strong></p><ul><li><code>p₁</code> is the inlet pressure to the compressor. The unit for pressure is not relevant.</li><li><code>p₂</code> is the outlet pressure from the compressor. The unit for pressure is not relevant, but it <strong>must</strong> be the same unit as <code>p₁</code>.</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>T₁</code> is the inlet temperature to the compressor.</li><li><code>κ</code> is the ratio of specific heats. Using a value of [1, κ] would correspond hence to polytropic compression.</li><li><code>η</code> is the efficiency of the compressor.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/utils.jl#L259-L276">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnergyModelsHydrogen.energy_curve" href="#EnergyModelsHydrogen.energy_curve"><code>EnergyModelsHydrogen.energy_curve</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">energy_curve(
    p::Float64,
    pᵢₙ::Float64,
    PR::Float64,
    n_comp::Int,
    M::Float64,
    LHV::Float64
)</code></pre><p>Returns the relative compression energy requirement for a multi-stage compression train.</p><p><strong>Arguments</strong></p><ul><li><code>p::Float64</code> is the delivery pressure.</li><li><code>pᵢₙ::Float64</code> is the inlet pressure.</li><li><code>PR::Float64</code> is the compression rate of each compressor in the train.</li><li><code>n_comp::Int</code> is the number of compressors in the train.</li><li><code>M::Float64</code> is molecular mass of the compressed gas.</li><li><code>LHV::Float64</code> is the mass lower heating value of the compressed gas.</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>T₁</code> is the inlet temperature to the compressor.</li><li><code>κ</code> is the ratio of specific heats. Using a value of [1, κ] would correspond hence to polytropic compression.</li><li><code>η</code> is the efficiency of the compressor.</li></ul><div class="admonition is-warning" id="Units-33583bbe7fe29f04"><header class="admonition-header">Units<a class="admonition-anchor" href="#Units-33583bbe7fe29f04" title="Permalink"></a></header><div class="admonition-body"><p>The units have to be consistent. This implies that both <code>p</code> and <code>pᵢₙ</code> require to have the same unit. The molecular mass should be provided in g/mol while the lower heating value should be given in MJ/kg.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EnergyModelsX/EnergyModelsHydrogen.jl/blob/1fa79018010e82e4fbe27f499fee86e5250325a3/src/utils.jl#L285-L315">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../methods-fields/">« Methods - Accessing fields</a><a class="docs-footer-nextpage" href="../methods-EMB/">Methods - <code>EnergyModelsBase</code> »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Friday 27 June 2025 11:21">Friday 27 June 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
